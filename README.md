# debcert

Proof of concept tools for creating software birth certificates for .deb packets and executables contained therein. Contents:

 * installed-binary.py: A tool for generating birth certificate for a given executable as well as its .deb package. Assumes the package is installed to the system with apt.
 * debconf/scraping.py: Functions for scraping launchpad.org in order to find build information for packages
 * debconf/aptttools.py: Functions for working with <code>apt-cache</code> and <code>apt-file</code>

Requires the <code>apt-file</code> package, used <code>debsums</code> if available. Tested on Ubuntu 14.04. 

Example testrun on Ubuntu 14.04.4:

<pre>
$ python installed-binary.py /usr/bin/smbclient 
{"buildcmd": ["18:14:21 runner /usr/bin/gcc default/source3/client/client_156.o default/source3/client/clitar_156.o default/source3/client/dnsbrowse_156.o default/libcli/smbreadline/smbreadline_1.o -o /\u00abBUILDDIR\u00bb/samba-4.1.6+dfsg/bin/default/source3/client/smbclient.inst -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,--as-needed -pie -fstack-protector -Wl,-no-undefined -Wl,--export-dynamic -lpthread -Wl,-rpath,/usr/lib/x86_64-linux-gnu/samba -Ldefault/source4/lib/socket -Ldefault/libcli/nbt -Ldefault/auth -Ldefault/libds/common -Ldefault/source4/libcli/ldap -Ldefault/lib/ldb-samba -Ldefault/lib/param -Ldefault/source4/auth/kerberos -Ldefault/source4/dsdb -Ldefault/nsswitch -Ldefault/source4/lib/events -Ldefault/libcli/registry -Ldefault/lib/tdb_wrap -Ldefault/auth/gensec -Ldefault/lib/krb5_wrap -Ldefault/libcli/auth -Ldefault/libcli/cldap -Ldefault/auth/credentials -Ldefault/libcli/ldap -Ldefault/nsswitch/libwbclient -Ldefault/lib/addns -Ldefault/lib -Ldefault/librpc -Ldefault/libcli/smb -Ldefault/libcli/util -Ldefault/libcli/security -Ldefault/lib/dbwrap -Ldefault/lib/socket -Ldefault/lib/util -Ldefault/source3 -L/usr/local/lib -L/usr/lib/x86_64-linux-gnu/heimdal -Wl,-Bdynamic -lpopt_samba3 -lsamba-util -linterfaces -ltevent-util -llibsmb -lmsrpc3 -ldbwrap -lsamba-security -lerrors -lsmbconf -lcli_smb_common -lsamba3-util -lutil_tdb -ldcerpc-samba -lndr-standard -lsamba-sockets -lndr -lutil_cmdline -lutil_setid -laddns -lwbclient -lcli-ldap-common -lsamba-credentials -lndr-samba -lcli_cldap -lcliauth -lkrb5samba -lgse -lgensec -ldcerpc-binding -lutil_ntdb -ltdb-wrap -lsmbregistry -lCHARSET3 -lutil_reg -lsmb_transport -lndr-nbt -levents -lsecrets3 -lwinbind-client -lasn1util -lsamdb-common -lauthkrb5 -lsamba-hostconfig -lldbsamba -lndr-krb5pac -lcli-ldap -lsamba-modules -lsamdb -lsmbd_shim -lflag_mapping -lauth_sam_reply -lserver-role -lcli-nbt -lnetif -lresolv -lrt -ldl -lnsl -lattr -lcrypt -lbsd -lasn1 -lgssapi -lcom_err -lkrb5 -lpyldb-util -lldb -ltalloc -lroken -lz -lgcrypt -lgnutls -lntdb -llber -lldap -lcups -lncurses -ltinfo -ltdb -lcap -lpopt -ltevent -lreadline"], "sha1": "a78a5f280e6f5048498083cb917d281e1dbc0bff", "cflags": "CFLAGS=\"-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security\" CPPFLAGS=\"-D_FORTIFY_SOURCE=2\" CXXFLAGS=\"-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security\" FFLAGS=\"-g -O2 -fstack-protector --param=ssp-buffer-size=4\" GCJFLAGS=\"-g -O2 -fstack-protector --param=ssp-buffer-size=4\" LDFLAGS=\"-Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,--as-needed\"  /usr/bin/python2.7 ./buildtools/bin/waf -v -j 4 configure --prefix=/usr --enable-fhs --sysconfdir=/etc --localstatedir=/var --with-privatedir=/var/lib/samba/private --with-smbpasswd-file=/etc/samba/smbpasswd --with-piddir=/var/run/samba --with-pammodulesdir=/lib/x86_64-linux-gnu/security --with-pam --with-syslog --with-utmp --with-pam_smbpass --with-winbind --with-shared-modules=idmap_rid,idmap_ad,idmap_adex,idmap_hash,idmap_ldap,vfs_dfs_samba4,auth_samba4 --with-automount --with-ldap --with-ads --with-dnsupdate --libdir=/usr/lib/x86_64-linux-gnu --with-modulesdir=/usr/lib/x86_64-linux-gnu/samba --datadir=/usr/share --with-lockdir=/var/run/samba --with-statedir=/var/lib/samba --with-cachedir=/var/cache/samba --disable-avahi --disable-rpath --disable-rpath-install --bundled-libraries=NONE,pytevent,iniparser --builtin-libraries=replace,ccan --minimum-library-version=\"\"", "package": "smbclient 2:4.1.6+dfsg-1ubuntu2.14.04.13", "analyzed": "2016-04-15T07:49:38", "source package": "samba", "filename": "/usr/bin/smbclient"}
{"sha1": ["a428788d911779b334d6eb76ce4aa97ae49d192a"], "source package url": "https://launchpad.net/ubuntu/+source/samba/2:4.1.6+dfsg-1ubuntu2.14.04.13", "bom-depends": ["samba-common (= 2:4.1.6+dfsg-1ubuntu2.14.04.13)", "libbsd0 (>= 0.0)", "libc6 (>= 2.14)", "libpopt0 (>= 1.14)", "libreadline6 (>= 6.0)", "libroken18-heimdal (>= 1.4.0+git20110226)", "libsmbclient (>= 2:4.0.3+dfsg1)", "libtalloc2 (>= 2.0.4~git20101213)", "libtevent0 (>= 0.9.9)", "samba-libs (= 2:4.1.6+dfsg-1ubuntu2.14.04.13)"], "buildlog url": "https://launchpad.net/~ubuntu-security/+archive/ubuntu/ppa/+build/9294689/+files/buildlog_ubuntu-trusty-amd64.samba_2%3A4.1.6+dfsg-1ubuntu2.14.04.13_BUILDING.txt.gz", "filename": "pool/main/s/samba/smbclient_4.1.6+dfsg-1ubuntu2.14.04.13_amd64.deb"}
</pre>